âœ… IndicaciÃ³n al agente de Replit
Objetivo: Automatizar el envÃ­o de recordatorios de pago vencido vÃ­a email para padres de familia, ejecutÃ¡ndose todos los dÃ­as (o al inicio de sesiÃ³n del admin si aÃºn no se usa cron).

ğŸ§  Funcionalidad general
Crear un proceso automatizado que:

Revise diariamente si hay adeudos vencidos o por vencer en los prÃ³ximos 3 dÃ­as.

Clasifique a los alumnos por nivel de riesgo de pago.

EnvÃ­e un correo personalizado a los tutores responsables.

Registre el envÃ­o en la tabla email_logs o una nueva tabla payment_reminders_sent.

ğŸ§© Requisitos tÃ©cnicos
ğŸ” Agendador automÃ¡tico (opciones):
âœ… OpciÃ³n A (simple): Ejecutar la lÃ³gica al iniciar sesiÃ³n como administrador (temporal).

ğŸ”„ OpciÃ³n B (ideal): Usar cron en el backend con node-cron para ejecutar diariamente a las 7:00 AM.

ğŸ“¤ LÃ³gica de envÃ­o:
Utilizar el mismo servicio de email ya implementado (SendGrid o EmailJS).

Validar que el tutor tenga un correo electrÃ³nico registrado.

Evitar enviar recordatorios duplicados el mismo dÃ­a al mismo alumno.

ğŸ§¾ Contenido del email:
Nombre del alumno.

Monto total pendiente.

Concepto y fecha de vencimiento mÃ¡s prÃ³xima.

Nivel de riesgo.

Frase de seguimiento como:
"Este es un recordatorio automÃ¡tico del sistema EduMex ERP. Si ya ha realizado su pago, favor de ignorar este mensaje."

ğŸ—‚ Registro del envÃ­o:
Crear o usar tabla como esta:

alumnoId	tutorId	fechaEnvio	riesgo	estado	canal
1	5	2025-04-17	Alto	enviado	correo
Registrar tambiÃ©n errores si los hubiera.

ğŸ’» Frontend adicional (opcional):
En la ruta /admin/recordatorios, agregar:

âœ… Indicador: â€œÃšltima ejecuciÃ³n: [fecha y hora]â€

ğŸ“ˆ Conteo: â€œSe enviaron X correos exitosamenteâ€

ğŸ“„ Tabla de registros enviados

âœ… Resultado esperado
Cada maÃ±ana o cada sesiÃ³n del admin, el sistema:

Detecta alumnos con riesgo o pagos vencidos

EnvÃ­a correos automÃ¡ticos a sus tutores

Registra los resultados para seguimiento

Evita duplicados y errores de lÃ³gica

Â¿Te gustarÃ­a que preparemos tambiÃ©n el contenido del email como plantilla para que el agente lo use directamente?